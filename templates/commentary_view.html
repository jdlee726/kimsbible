{% extends "layout.html" %}
{% block body %}
    {% autoescape false %}

    {% if table == 'commentary' %}
        {% set main = '오픈주석' %}
    {% elif table == 'classic' %}
        {% set main = '클래식 주석' %}
    {% endif %}

    {% if mode == 'mycommentary' %}
        {% set listurl = '/commentary/mylist/?p=' + pagenum|string %}
    <!-- vcode의 경우 사이절이나 끝절에 있을 경우 어떻게 리턴?? -->
    {% elif mode == 'myvcode' or mode == 'vcode' %}
        {% set listurl = '/commentary/vcode/' + vcode|string + '/' %}
    {% elif mode == 'commentary' %}
        {% set listurl = '/commentary/list/?p=' + pagenum|string %}
    {% elif mode == 'classic' %}
        {% set listurl = '/classic/list/?p=' + pagenum|string %}
    {% else %}
        {% set listurl = '/' + table + '/list/' %}
    {% endif %}

    <div class="container border border-secondary rounded" style="padding: 20px;">

                <div class="page-header">
                    <h1>{{ main }}</h1>
                </div>
                <hr />
                <br>
                <div class="commentary_title">
                    <h2>{{ view[4] }}</h2>
                </div>
                <div class="vcode" style="font-size:18px;">
                    본문: {{ view[8] }}
                </div>
                <br>
                작성: {{ view[2] }} ({{ view[3] }})
                <br>
                {% set date = view[1].split('.') %}
                작성시간: {{ date[0] }}
                <br>
                {% if view[12] %}
                    {% set editied_date = view[12].split('.') %}
                    수정시간: {{ editied_date[0] }}
                <br>
                {% endif %}
                조회수: {{ view[11] }}
                <br>
                {% if view[13] == 0 %}
                    <span><font color="red">비공개</font></span>
                {% endif %}
                <br><br><br>
                <div class="commentary_contents">
                    {{ view[5] }}
                </div>
            
                <br><br>
                <button class="btn btn-secondary" onclick="location.href = '{{ listurl }}';">목록보기</button>
                {% if current_user.user_id == view[3] %}
                &nbsp <button class="btn btn-warning" onclick="location.href = '/{{ table }}/edit/{{ view[0] }}';">글 수정하기</button>
                &nbsp <button class="btn btn-danger" onclick="location.href = '/{{ table }}/remove/confirm/{{ view[0] }}?n={{ listurl }}';">글 삭제하기</button>
                {% endif %}

                <br><br>

                <div id="disqus_thread"></div>
                <script>
                /**
                *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
                
                var disqus_config = function () {
                  this.page.url = "https://app.alphalef.com/{{ table }}/view/{{ view[0] }}/{{ view[10] }}/";  // Replace PAGE_URL with your page's canonical URL variable
                  this.page.identifier = "{{ table }}-{{ view[0] }}-{{ view[10] }}"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://alpaalrebseonggyeong.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                

        <br><br>
    </div>
    <script>
        document.title = "{{ view[4] }}";
    </script>


    {% endautoescape %}
{% endblock %}
