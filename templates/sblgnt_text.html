{% extends "layout.html" %} {% block body %}
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDqntw5b-vl4XdM1I2lTwUvE1yxpund5pM"></script>
<script src="/static/js/syntax_viewer.js?ver=1.1"></script>

<script>
let book = '{{ book }}';
let chapter = '{{ chapter }}';
$(document).ready(function() {
        $.ajax({
                //url: 'https://kungsik1.pythonanywhere.com/api/text/gnt/' + book + '/' +chapter,
                url: 'http://127.0.0.1:5000/api/text/gnt/' + book + '/' +chapter,
                datatype: 'json',
                success: function(data) {
                  $('#text').html(data['verse']);
                  $.getScript('/static/js/modal_word_api.js')
                }
        });
});
</script>

{% set next_chapter = chapter + 1 %}
{% set prev_chapter = chapter - 1 %}
{% set last_chp = 50 %}

<div class="left">
  {% if chapter > 1 %}
  <a href="/sblgnt/{{ book }}/{{ prev_chapter }}">이전 장</a><br><br> {% else %}
  <font color="white">이전 장</font><br><br> {% endif %}
</div>

<div class="right">
  {% if chapter
  < last_chp %} <a href="/sblgnt/{{ book }}/{{ next_chapter }}">다음 장</a><br><br> {% else %}
    <font color="white">다음 장</font><br><br> {% endif %}
</div>

<br><br>

<div class="center" align="center">
  {% include 'sblgnt_selector.html' %}
</div>

<div style="text-align: right">
  <br>
  <!--  <button class="btn btn-default" id="verse_block">절(verse)구분</button> -->
  <button class="btn btn-default" id="syntax_enact">절(C)/구(P)단위표시</button> 
  <button class="btn btn-default" id="geoinfo">지도표시</button> 
  <br><br>
  <input type="checkbox" id="showkorean" value="korean" checked onclick="showKor();">개역한글 대역
</div>

<div id="map-canvas" style="width:100%; height:400px; display:none"></div>
<div id="map-comment" style="display:none">
  *위 지도에 표시된 빨간 점들은 본 장에 기록되어 있는 지역을 표시한 것입니다. 위 점을 클릭하시면 지명과 인용된 성경구절을 보실 수 있습니다. (번역본 장절 기준)<br> *본 장에 별도로 기록된 지명이 없다면 아무런 지역 표시가 되지 않습니다.<br> *Copyright ©2017 by <a href="http://www.openbible.info/geo/" target="_blank">Bible Geocoding</a>
</div>

<script>
  function initialize() {
    var map = new google.maps.Map(document.getElementById("map-canvas"), {
      center: {
        lat: 31.7833,
        lng: 35.2167
      },
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.SATELLITE
    });
    var layer = new google.maps.KmlLayer({
      url: "{{kml_file}}",
      preserveViewport: false
    });
    layer.setMap(map);
  }
 
 function showKor() {
	 let myelements = document.querySelectorAll(".sblgnt_korean");
	 if (document.getElementById("showkorean").checked == true) {
		for (var i = 0; i < myelements.length; i++) {
			myelements[i].style.display = "block";
		}
	 }
	 else {
		for (var i = 0; i < myelements.length; i++) {
			myelements[i].style.display = "none";
		}
	 }
 }
</script>

{% autoescape false %}
<div class="sblgnt" id="text">
</div>
{% endautoescape %}

{% endblock %}
